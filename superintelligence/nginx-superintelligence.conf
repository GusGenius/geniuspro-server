# GeniusPro Superintelligence v1 — Nginx config
# Routes /super-intelligence/* to the Superintelligence server (port 8100)
# Add this as an additional location block in your main api.geniuspro.io config

# Rate limiting for Superintelligence
limit_req_zone $binary_remote_addr zone=si_limit:10m rate=20r/s;

# Superintelligence API
location /super-intelligence/ {
    limit_req zone=si_limit burst=50 nodelay;

    proxy_pass http://127.0.0.1:8100;
    proxy_http_version 1.1;

    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;

    # LLM requests can be slow (up to 5 min for complex tasks)
    proxy_connect_timeout 300s;
    proxy_send_timeout 300s;
    proxy_read_timeout 300s;

    # Streaming support — critical for SSE
    proxy_buffering off;
    proxy_request_buffering off;
    proxy_cache off;

    # SSE headers
    add_header X-Accel-Buffering no;
}
